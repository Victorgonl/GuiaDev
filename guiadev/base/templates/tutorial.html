{% extends "index.html" %}

{% block tutorial %}

{% load static %}

{% load class_tag %}


<div class="voltar">
    <a href="{% url 'tutoriais' %}"><i class="fa fa-arrow-left" aria-hidden="true"></i></a>
</div>

{% if tutorial.usuario.username == usuario.username %}
<form method="post" action="{% url 'tutorial' %}">
    {% csrf_token %}
    <input type="text" hidden name="id" value="{{tutorial.id}}">
    <input type="text" hidden name="delete" value='True'>
    <button class="button-remover" type="submit" value="Submit">X</button>
</form>
{% endif %}

<br><br>

<div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">{{tutorial.titulo}}</h1>
    <h1 class="h5 mb-2 text-gray-800">by: {{tutorial.usuario.username}}</h1>
    <p class="mb-4">{{tutorial.descricao}}</p>

    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        {% for conteudo in conteudos %}
        <div class="card-body">
            <div class="table-responsive">
                {% if conteudo|get_class == 'Codigo' %}
                {{conteudo.texto}}
                <form method="post" action="{% url 'tutorial' %}">
                    {% csrf_token %}
                    <input type="text" hidden name="id" value="{{tutorial.id}}">
                    <input type="text" hidden name="like" value=''>
                    <input type="text" hidden name="copy" value='{{conteudo.id}}'>
                    <button class="button-copy displayFlexCenter" type="submit" value="Submit">
                        <i class="fa fa-copy icone-copy" aria-hidden="true"></i>
                    </button>
                </form>
                {% elif conteudo|get_class == 'Marcacao' %}
                {{conteudo.texto}}
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
        </div>
            <div>
                <div>{{tutorial.total_likes}}</div>
                    <form method="post" action="{% url 'tutorial' %}">
                        {% csrf_token %}
                        <input type="text" hidden name="id" value="{{tutorial.id}}">
                        <input type="text" hidden name="like" value=True>
                        <input type="text" hidden name="copy" value=''>

                        <button type="submit" value="Submit">
                            <i class="fa fa-thumbs-up icone-like" aria-hidden="true"></i>
                        </button>
                    </form>
                </div>
                {% for comentario in comentarios %}
                <div>
                    <i class="fa fa-regular fa-user icone-user"></i>
                    <div>
                        {{comentario.usuario.username}}
                    </div>
                    <div>
                        {{comentario.texto}}
                    </div>
                </div>
                {% endfor %}
                <form method="post" class="form-comentario" action="{% url 'tutorial' %}">
                    {% csrf_token %}
                    <input type="text" hidden name="id" value="{{tutorial.id}}">
                    <div class="card-adicionar-comentario">
                        <div class="texto-novo-comentario">
                            <textarea class="input-novo-comentario" type="text" name="comentario"></textarea>
                        </div>
                        <div>
                            <button class="button-comentar" type="submit" value="Submit">
                                Comentar
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock tutorial %}
